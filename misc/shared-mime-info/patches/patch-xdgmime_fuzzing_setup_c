Index: xdgmime/fuzzing/setup.c
--- xdgmime/fuzzing/setup.c.orig
+++ xdgmime/fuzzing/setup.c
@@ -16,6 +16,23 @@
 
 #include "setup.h"
 
+#ifndef O_PATH
+#define O_PATH 0
+#endif
+
+/* TEMP_FAILURE_RETRY seems to be available only on Linux. For systems that
+ * don't have this macro we provide our own version. This code was taken from
+ * file "/usr/include/unistd.h" from Debian package "libc6-dev"
+ * version 2.3.2.ds1-20. */
+#ifndef TEMP_FAILURE_RETRY
+#define TEMP_FAILURE_RETRY(expression) \
+	(__extension__ \
+	 ({ long int __result; \
+		do __result = (long int) (expression); \
+		while (__result == -1L && errno == EINTR); \
+		__result; }))
+#endif
+
 static const char *mime_dir_filenames[] =
   {
     "mime.cache",
