Index: src/libx264encoder.cpp
--- src/libx264encoder.cpp.orig
+++ src/libx264encoder.cpp
@@ -68,13 +68,25 @@ bool LibX264Encoder::initialize(const QSize &size)
 
     switch (m_profile) {
     case H264Profile::Baseline:
+#ifdef AV_PROFILE_H264_BASELINE
+        m_avCodecContext->profile = AV_PROFILE_H264_BASELINE;
+#else
         m_avCodecContext->profile = FF_PROFILE_H264_BASELINE;
+#endif
         break;
     case H264Profile::Main:
+#ifdef AV_PROFILE_H264_MAIN
+        m_avCodecContext->profile = AV_PROFILE_H264_MAIN;
+#else
         m_avCodecContext->profile = FF_PROFILE_H264_MAIN;
+#endif
         break;
     case H264Profile::High:
+#ifdef AV_PROFILE_H264_HIGH
+        m_avCodecContext->profile = AV_PROFILE_H264_HIGH;
+#else
         m_avCodecContext->profile = FF_PROFILE_H264_HIGH;
+#endif
         break;
     }
 
