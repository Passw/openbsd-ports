Index: src/libopenh264encoder.cpp
--- src/libopenh264encoder.cpp.orig
+++ src/libopenh264encoder.cpp
@@ -64,13 +64,25 @@ bool LibOpenH264Encoder::initialize(const QSize &size)
         // passes that through, but libopenh264 only allows BASELINE.
         // Until that bug is fixed there'll always be a warning that the
         // profile is not supported (https://github.com/cisco/openh264/issues/3613)
+#ifdef AV_PROFILE_H264_CONSTRAINED_BASELINE
+        m_avCodecContext->profile = AV_PROFILE_H264_CONSTRAINED_BASELINE;
+#else
         m_avCodecContext->profile = FF_PROFILE_H264_CONSTRAINED_BASELINE;
+#endif
         break;
     case H264Profile::Main:
+#ifdef AV_PROFILE_H264_MAIN
+        m_avCodecContext->profile = AV_PROFILE_H264_MAIN;
+#else
         m_avCodecContext->profile = FF_PROFILE_H264_MAIN;
+#endif
         break;
     case H264Profile::High:
+#ifdef AV_PROFILE_H264_HIGH
+        m_avCodecContext->profile = AV_PROFILE_H264_HIGH;
+#else
         m_avCodecContext->profile = FF_PROFILE_H264_HIGH;
+#endif
         break;
     }
 
