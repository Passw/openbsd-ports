Index: Telegram/SourceFiles/ffmpeg/ffmpeg_utility.cpp
--- Telegram/SourceFiles/ffmpeg/ffmpeg_utility.cpp.orig
+++ Telegram/SourceFiles/ffmpeg/ffmpeg_utility.cpp
@@ -683,10 +683,18 @@ int DurationByPacket(const Packet &packet, AVRational 
 }
 
 int ReadRotationFromMetadata(not_null<AVStream*> stream) {
+#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(60, 15, 100)
+	const AVPacketSideData *side_data = av_packet_side_data_get(
+		stream->codecpar->coded_side_data,
+		stream->codecpar->nb_coded_side_data,
+		AV_PKT_DATA_DISPLAYMATRIX);
+	const auto displaymatrix = side_data ? (AVCPBProperties *)side_data->data : NULL;
+#else
 	const auto displaymatrix = av_stream_get_side_data(
 		stream,
 		AV_PKT_DATA_DISPLAYMATRIX,
 		nullptr);
+#endif
 	auto theta = 0;
 	if (displaymatrix) {
 		theta = -round(av_display_rotation_get((int32_t*)displaymatrix));
