Index: lib/utils_base.c
--- lib/utils_base.c.orig
+++ lib/utils_base.c
@@ -700,7 +700,7 @@ void np_state_write_string(time_t data_time, char *dat
 	fprintf(fp,"# NP State file\n");
 	fprintf(fp,"%d\n",NP_STATE_FORMAT_VERSION);
 	fprintf(fp,"%d\n",this_monitoring_plugin->state->data_version);
-	fprintf(fp,"%lu\n",current_time);
+	fprintf(fp,"%lld\n",(long long)current_time);
 	fprintf(fp,"%s\n",data_string);
 
 	fchmod(fd, S_IRUSR | S_IWUSR | S_IRGRP);
