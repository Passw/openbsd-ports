http://github.com/Orc/discount/pull/299
https://patch-diff.githubusercontent.com/raw/Orc/discount/pull/299.patch

Index: resource.c
--- resource.c.orig
+++ resource.c
@@ -107,6 +107,7 @@ ___mkd_initmmiot(MMIOT *f, void *footnotes, mkd_flag_t
 	    f->footnotes = footnotes;
 	else {
 	    f->footnotes = malloc(sizeof f->footnotes[0]);
+	    f->footnotes->reference = 0;
 	    CREATE(f->footnotes->note);
 	}
 	if ( flags )
